<h2>Lista de Productos</h2>

<table class="tabla">
  <thead>
    <tr>
      <th>ID</th>
      <th>Nombre</th>
      <th>Precio</th>
      <th>Categoría</th>
      <th>Acciones</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let producto of productos">
      <td>{{ producto.id }}</td>

      <!-- Nombre -->
      <td>
        <ng-container *ngIf="productoEditando && productoEditando.id === producto.id; else mostrarNombre">
          <input [(ngModel)]="productoEditando.nombre" />
        </ng-container>
        <ng-template #mostrarNombre>
          <span>{{ producto.nombre }}</span>
        </ng-template>
      </td>

      <!-- Precio -->
      <td>
        <ng-container *ngIf="productoEditando && productoEditando.id === producto.id; else mostrarPrecio">
          <input type="number" [(ngModel)]="productoEditando.precio" />
        </ng-container>
        <ng-template #mostrarPrecio>
          <span>{{ producto.precio | currency }}</span>
        </ng-template>
      </td>

      <!-- Categoría -->
      <td>
        <ng-container *ngIf="productoEditando && productoEditando.id === producto.id; else mostrarCategoria">
          <input [(ngModel)]="productoEditando.categoriaId" />
        </ng-container>
        <ng-template #mostrarCategoria>
          <span>{{ producto.categoriaId }}</span>
        </ng-template>
      </td>

      <!-- Acciones -->
      <td>
        <ng-container *ngIf="productoEditando && productoEditando.id === producto.id; else botonesEditar">
          <button (click)="guardarEdicion()">Guardar</button>
          <button (click)="cancelarEdicion()">Cancelar</button>
        </ng-container>
        <ng-template #botonesEditar>
          <button (click)="editarProducto(producto)">Editar</button>
        </ng-template>
        <button (click)="eliminarProducto(producto.id!)">Eliminar</button>
      </td>
    </tr>
  </tbody>
</table>